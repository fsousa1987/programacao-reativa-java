
---

# Cap√≠tulo 2: Mono
## 2.5 Introdu√ß√£o ao Mono e Flux

Com a base do modelo Publisher/Subscriber bem compreendida e testada, iniciamos agora o uso do **Project Reactor**, uma das bibliotecas mais populares que implementam a especifica√ß√£o **Reactive Streams**.

> Enquanto a especifica√ß√£o define as interfaces e o contrato do modelo reativo (como `Publisher` e `Subscriber`), o Project Reactor fornece as implementa√ß√µes concretas que facilitam o uso dessas ideias no dia a dia da programa√ß√£o com Java.

---

## üì¶ Project Reactor: A implementa√ß√£o

A biblioteca Reactor pode ser comparada ao que o **Hibernate √© para a JPA**. Ou seja:

- A JPA define uma especifica√ß√£o.
- O Hibernate fornece a implementa√ß√£o.

De forma an√°loga:

- O Reactive Streams define interfaces como `Publisher`, `Subscriber`, `Subscription`, etc.
- O Project Reactor fornece implementa√ß√µes concretas, sendo as principais: `Mono` e `Flux`.

---

## üß™ O que √© o `Mono`?

O `Mono` representa um **Publisher especializado que pode emitir no m√°ximo um √∫nico item**, ou **nenhum item**.

### Comportamentos poss√≠veis:

| Cen√°rio                                | Resultado                                     |
|----------------------------------------|-----------------------------------------------|
| Possui um valor para emitir            | Emite o valor com `onNext()` e finaliza com `onComplete()` |
| N√£o possui valor                       | N√£o emite nada e finaliza com `onComplete()`  |
| Ocorre uma exce√ß√£o durante o processo  | Finaliza com `onError()`                      |

> üìå Mesmo que o `Subscriber` solicite v√°rios itens (por exemplo: 3, 15, 100...), o `Mono` emitir√° **apenas um item ou nenhum**, e ent√£o finalizar√° o fluxo.

### Exemplo comum de uso:

Imagine uma consulta a um banco de dados buscando um cliente pelo ID:

```plaintext
SELECT * FROM cliente WHERE id = 123;
```

- Se o cliente for encontrado ‚Üí o `Mono` emitir√° o cliente e finalizar√°.
- Se n√£o houver nenhum resultado ‚Üí o `Mono` apenas enviar√° `onComplete()`.
- Se ocorrer um erro na consulta ‚Üí o `Mono` emitir√° `onError()`.

---

## üîÑ O que √© o `Flux`?

Diferente do `Mono`, o `Flux` representa um Publisher capaz de emitir **zero ou muitos itens** ‚Äî incluindo fluxos cont√≠nuos ou infinitos.

### Comportamentos poss√≠veis:

| Cen√°rio                                 | Resultado                                      |
|-----------------------------------------|------------------------------------------------|
| Possui uma sequ√™ncia de dados           | Emite cada item com `onNext()` at√© o fim e finaliza com `onComplete()` |
| Fluxo cont√≠nuo de dados (ex: stream real-time) | Emite indefinidamente at√© cancelamento ou erro |
| Interrup√ß√£o ou erro durante o fluxo     | Envia `onError()` e finaliza imediatamente     |

> Um `Flux` pode inclusive **nunca terminar**, como √© o caso de streams de eventos ou dados ao vivo.

### Exemplo pr√°tico:

Suponha que o `Flux` esteja emitindo pre√ßos de Bitcoin em tempo real:

```plaintext
BTC = $67,200 ‚Üí $67,190 ‚Üí $67,185 ‚Üí ...
```

- O `Subscriber` pode solicitar 3 valores ‚Üí o `Flux` emitir√° 3 e aguardar√° novo pedido.
- O `Subscriber` pode cancelar a assinatura a qualquer momento.
- Em caso de erro (ex: perda de conex√£o), o `Flux` emitir√° `onError()`.

---

## ‚úÖ Comparativo: Mono vs Flux

| Caracter√≠stica       | `Mono`                   | `Flux`                        |
|----------------------|--------------------------|-------------------------------|
| Emiss√£o m√≠nima       | 0 itens                  | 0 itens                       |
| Emiss√£o m√°xima       | 1 item                   | N itens                       |
| Finaliza√ß√£o          | `onComplete()` ou `onError()` | `onComplete()` ou `onError()` |
| Uso t√≠pico           | Resultados √∫nicos (ex: buscar por ID) | Listas, streams cont√≠nuos ou eventos |

---
