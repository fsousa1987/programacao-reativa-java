
---

# Cap√≠tulo 6: A Especifica√ß√£o Reactive Streams

Agora que j√° compreendemos **por que** a programa√ß√£o reativa surgiu e **qual problema ela resolve**, √© hora de entender **como ela funciona**. E para isso, precisamos explorar a **especifica√ß√£o conhecida como Reactive Streams**.

Essa especifica√ß√£o √© baseada no **padr√£o de projeto Observer** ‚Äî e nada melhor do que come√ßar com uma analogia pr√°tica para compreend√™-lo.

## O Exemplo do Twitter (ou X)

Pense no Twitter ‚Äî agora rebatizado como X.  
Usu√°rios seguem outros usu√°rios. Suponha que um ator famoso publique um tweet. Se voc√™ o segue, voc√™ ver√° esse tweet.

Agora, se voc√™ comentar ou retuitar essa publica√ß√£o, seus **seguidores tamb√©m ver√£o** o conte√∫do. Isso √© o padr√£o **observer** em a√ß√£o:

> Um objeto (o observador) se inscreve para receber notifica√ß√µes de outro objeto (o observado) e **reage automaticamente** sempre que h√° uma atualiza√ß√£o.

√â disso que se trata a programa√ß√£o reativa: **observar e reagir a fluxos de dados conforme eles acontecem**.

---

## Uma Analogia com Excel

Vamos refor√ßar esse conceito com um exemplo mais t√©cnico, por√©m visual: o Excel.

Imagine que voc√™ precise aplicar uma l√≥gica de neg√≥cio simples:

- Obter uma **string** de um servi√ßo remoto.
- Calcular o **tamanho** dessa string.
- Multiplicar esse tamanho por **2**.
- E ent√£o somar **1** ao resultado.

No Excel, voc√™ faria isso com **f√≥rmulas em c√©lulas**:

1. A c√©lula F5 √© preenchida automaticamente com a string quando a resposta chega.
2. Uma segunda c√©lula observa F5 e calcula `=LEN(F5)`.
3. Outra c√©lula observa essa e faz `=resultado * 2`.
4. A √∫ltima c√©lula observa a anterior e faz `=resultado + 1`.

> Assim que a string chega, **todas as c√©lulas reagem automaticamente em cadeia**, executando a l√≥gica definida.  
> Isso √© exatamente o que acontece na programa√ß√£o reativa: **callbacks que reagem ao fluxo de dados conforme ele chega**.

---

## Os Componentes da Reactive Streams Specification

A especifica√ß√£o Reactive Streams define **interfaces** que modelam como os dados fluem entre componentes. Vamos entender cada um deles com base no exemplo do Twitter:

### üîπ `Publisher` (Publicador)
√â quem **emite os dados**. No nosso exemplo, o ator famoso que publica os tweets.

### üîπ `Subscriber` (Assinante)
√â quem **recebe os dados**. Voc√™, que segue o ator e deseja ser notificado quando ele posta algo novo.

### üîπ `Subscription` (Inscri√ß√£o)
√â o **contrato** entre o publisher e o subscriber. Ela permite:

- O subscriber solicitar mais dados com `request(n)`.
- Ou cancelar a assinatura com `cancel()`.

Essa abordagem evita o envio de dados que o subscriber **n√£o consegue ou n√£o quer processar** ‚Äî algo fundamental para o controle de **backpressure**.

---

## O Papel do Processor

Agora imagine o seguinte: voc√™ √© um seguidor do ator, mas tamb√©m **tem seus pr√≥prios seguidores**.

Ou seja, voc√™:

- Recebe os tweets do ator,
- E tamb√©m publica rea√ß√µes ou coment√°rios que s√£o vistos pelos seus seguidores.

Nesse caso, voc√™ exerce **duas fun√ß√µes** ao mesmo tempo:

- Atua como **Subscriber** em rela√ß√£o ao ator,
- E como **Publisher** em rela√ß√£o aos seus seguidores.

Para modelar isso, a especifica√ß√£o Reactive Streams define o **Processor**:

> üîÅ `Processor` = `Publisher` + `Subscriber`

Um processor pode **receber dados de upstream** e **emitir dados para downstream**, atuando como um elo intermedi√°rio.  
O fluxo pode ser composto por **um publisher ‚Üí m√∫ltiplos processors ‚Üí um subscriber**.

---

## Reactive Streams √© Apenas a Especifica√ß√£o

Assim como temos o **JPA (Java Persistence API)** como especifica√ß√£o e **Hibernate** como implementa√ß√£o, o **Reactive Streams** tamb√©m √© apenas uma **especifica√ß√£o**, ou seja, **n√£o √© uma biblioteca que voc√™ importa e usa diretamente**.

Felizmente, h√° diversas **implementa√ß√µes** dispon√≠veis no mercado:

- **Akka Streams**
- **RxJava 2**
- **Project Reactor** (foco deste curso)

---

## Por Que Vamos Usar o Reactor?

A biblioteca **Reactor** foi criada pela equipe da **Spring** e √© **totalmente integrada ao ecossistema Spring WebFlux**, o que a torna uma escolha natural para aplica√ß√µes reativas em Java.

Al√©m disso, h√° amplo suporte a tecnologias modernas como:

- **R2DBC** (drivers reativos para bancos relacionais como PostgreSQL, MySQL, H2)
- **MongoDB** (driver reativo)
- **Elasticsearch**
- **Kafka e RabbitMQ**
- **RSocket**, para comunica√ß√£o bidirecional reativa

E o melhor: h√° uma comunidade ativa e crescente ao redor do Reactor.

---

## Conclus√£o

A Reactive Streams Specification fornece as **bases t√©cnicas** para que bibliotecas como Reactor consigam modelar sistemas de comunica√ß√£o modernos, eficientes e reativos.

---
